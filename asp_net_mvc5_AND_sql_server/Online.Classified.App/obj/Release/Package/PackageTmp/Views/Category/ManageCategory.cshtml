
@{
    ViewBag.Title = "ManageCategory";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section>
    <div class="container">
        <div class="row">
            <h2 class="title text-center">Manage Category</h2>
        </div>
        <div class="row">
            @Html.ActionLink("Create New", "Create", "Category", new { Id = "0" }, new { @class = "btn btn-success", @style = "margin-bottom: 20px;" })


        </div>
        <div class="row">

            <table id="myCategory" class="table table-striped table-hover" cellspacing="0" width="100%">
                <thead>
                    <tr>
                        <th></th>
                        <th>Name</th>

                        <th>Status</th>




                        <th>Edit</th>
                        <th>Delete</th>
                    </tr>
                </thead>
                <tfoot>
                    <tr>
                        <th></th>
                        <th>Name</th>

                        <th>Status</th>


                        <th>Edit</th>
                        <th>Delete</th>

                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</section>
<script>
    $(document).ready(function () {
        let data = getCategory();
        $('#myCategory').DataTable({
            ajax: { url: '/Category/GetCategories', dataSrc: 'data' },
            //data: data,
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            type: "GET",
            columns: [
                {
                    render: function (data, type, JsonResultRow, meta) {
                        return '<img style="border-radius: 50%; width: 70px; height: 70px;" src="' + JsonResultRow.CategoryImage + '" />';
                    }
                },
                { data: 'Name' },
               

                {
                    render: function (data, type, JsonResultRow, meta) {
                        if (JsonResultRow.Status == true) {
                            return '<div style="background-color:green;color: #fff; width: 50px; text-align: center; border-radius: 4px;"> YES </div>';
                        }
                        return '<div style="background-color: red;padding: 0px 5px;color: #fff; width: 50px; text-align: center;border-radius: 4px;"  > NO </div>';

                    }
                },
                
                {
                    "data": "Id", "width": "50px", "render": function (data) {
                        return '<a href="/Category/Create/' + data + '"><i class="fa fa-pencil" aria-hidden="true"></i></a>'
                    }
                },
                {
                    "data": "Id", "width": "50px", "render": function (data) {
                        return '<a style="color:red;" class="popup" href="/Category/Delete/' + data + '"><i class="fa fa-trash" aria-hidden="true"></i></a>'
                    }
                }
            ]
        });
    });
</script>

<script>
    const getCategory = async () => {
        const response = await fetch('/Category/GetCategories');
        const data = await response.json();
        return data;
    }
</script>

